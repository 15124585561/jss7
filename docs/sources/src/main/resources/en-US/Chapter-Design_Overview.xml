<?xml version='1.0'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "SS7_Stack_User_Guide.ent">
%BOOK_ENTITIES;
]>

<chapter
	id="design_overview">

	<title>The Basics</title>
	<important>
		<para>Be aware, &THIS.PLATFORM; &THIS.APPLICATION; is subject to changes as it is under active development!
		</para>
	</important>
	<para>The &THIS.PLATFORM; &THIS.APPLICATION; is logically divided into two sections. 
	The lower section includes SS7 Level 3 and below. The lower section is influenced by type of SS7 hardware (Level 1) used.
	</para>
	<para>
	The upper section includes SS7 Level 4 and above.
	This logical division is widely based on flexibility of &THIS.PLATFORM; &THIS.APPLICATION; to allow usage of any SS7 hardware 
	available in the market and yet &THIS.PLATFORM; &THIS.APPLICATION; Level 4 and above remains the same. 
	</para>
	
	<para>
		Further &THIS.PLATFORM; &THIS.APPLICATION; provides flexibility to use the Level 2,3 and Level 4 in same JVM and 
		in same machine where SS7 Hardware (Level 1) is installed. Or its also possible to have Level 1,2,3 to be installed 
		on separate machine and Level 4 on separate machine. In latter case <literal>M3UA</literal> over SCTP 
		is leveraged for communication between Level 4 and Level 3 and is called &THIS.PLATFORM; Signaling Gateway. 
	</para>
	
	<para>
		Bellow diagram shows complete &THIS.PLATFORM; &THIS.APPLICATION; in same machine 
	</para>
	<mediaobject id="ss7_stack_same_machine">
		<imageobject>
			<imagedata
				width="300px"
				align="center"
				fileref="images/SS7StackSimple.jpg"
				format="JPG" />
		</imageobject>
		<caption>
			<para>&THIS.PLATFORM; &THIS.APPLICATION;</para>
		</caption>
	</mediaobject>
	
	<para>
		Bellow diagram shows &THIS.PLATFORM; Signaling Gateway 
	</para>
	<mediaobject id="signaling_gateway">
		<imageobject>
			<imagedata
				align="center"
				fileref="images/MobicentsSgw.jpg"
				format="JPG" />
		</imageobject>
		<caption>
			<para>&THIS.PLATFORM; Signaling Gateway</para>
		</caption>
	</mediaobject>
	
	<important>
		<para>If you use &THIS.PLATFORM; M3UA stack, you have to use JDK 7 to run the stack as well as to compile source code. M3UA leverages Java SCTP which is available only from JDK 7.</para>
	</important>

	<para>
	 Apart from advantages mentioned in 
	</para>
		
	<para>&THIS.PLATFORM; &THIS.APPLICATION;
		consists of following functional blocks:
	</para>
		<section
		id="design_overview_Linkset">
		<title>Linkset</title>
			
				<!-- XXX: this possibly should be rephrased. -->
				<para>
					<literal>Linkset</literal> is logical group of links between two Signaling Points. 
					This term hides <literal>MTP</literal> layer, ie. it abstracts whether hardware
					<literal>MTP</literal> is used or M3UA.
				</para>
				<para>
				Three type of <literal>Linkset</literal> are defined
				</para>
				<itemizedlist>
					<listitem>
						<para><literal>DahdiLinkset</literal> : As the name suggests, this linkset is for <literal>dahdi</literal> based hardware. 
						<literal>dahdi</literal> boards only provides SS7 MTP1 layer and usually depends on external software to provide MTP2/MTP3 support.</para>
						<para>Well known <literal>dahdi</literal> based SS7 cards are <literal>Diguim</literal> and <literal>Sangoma</literal></para>
					</listitem>
					<listitem>
						<para><literal>DialogicLinkset</literal> : Linkset for <literal>dialogic</literal> based hardware. <literal>dialogic</literal> boards 
						have MTP2 and MTP3 support on board.</para>
					</listitem>
					<listitem>
						<para><literal>M3UALinkset</literal> : M3UA stands for MTP Level 3 (MTP3) User Adaptation Layer as defined by the IETF SIGTRAN working group in RFC 4666. 
						<literal>M3UALinkset</literal> enables the &THIS.PLATFORM; &THIS.APPLICATION; Level 4 (e.g. ISUP, SCCP) to run over IP instead of instead of SS7 network</para>
					</listitem>
				</itemizedlist>		
				<para>
					Each type of linkset has coresponding factory. Configuration of linkset factories is exaplained in subsections of <xref linkend="configuring" />.
				</para>	
				

		</section>
		<section
		id="design_overview_shell">
		<title>Shell Management client</title>
				<para>
					<literal>Shell</literal> is Command Line Interface (CLI) tool which allows to manage different aspects of &THIS.PLATFORM; &THIS.APPLICATION; in interactive manner. 
					It connects to different instances of &THIS.PLATFORM; &THIS.APPLICATION; which manage <literal>Linksets</literal>,
					<literal>SCCP</literal> routing and <literal>M3UA</literal>. For detailed information please refer to:	<xref linkend="shell" />.
					Usually <literal>Shell</literal> will be invoked from remote machine(remote to <literal>Linksets</literal> and application protocols).

				</para>
				</section>
		<!--  	
		<varlistentry>
			<term>Application</term>
			<listitem>
				<para>
					<literal>Application</literal>
					term encapsulates not only application level protocols(such as
					<literal>SCCP</literal>
					or
					<literal>ISUP</literal>
					) but also
					entities which make use of them(like
					<literal>SLEE RA &amp; Service</literal>
					)
				</para>
			</listitem>
		</varlistentry>
		-->
	

	<section
		id="design_overview_ss7_service">
		<title>SS7 Service</title>
				<para>Service is element which is used to manage <literal>LinkSets</literal> and protocols like <literal>SCCP</literal>. 
				SS7 service creates instance of &THIS.PLATFORM; SCCP Stack and bind's it to JNDI name java:/mobicents/ss7/sccp</para>
				<para>SS7 Service is JMX based service deployed in JBoss Application Server</para>
				<para>SS7 Service hides the details like whether Level 4 and above connects to &THIS.PLATFORM; Signaling Gateway via M3UA or SS7 Hardware 
				is installed in same machine as Level 4</para>
		
		<para>
			Diagram below depicts elements which are deployed as part of
			<literal>SS7 Service</literal>:
		</para>

		<mediaobject
			id="ss7_service">
			<imageobject>
				<imagedata
					width="300px"
					align="center"
					fileref="images/ss7-design-overview3.jpg"
					format="PNG" />
			</imageobject>
			<caption>
				<para>&THIS.PLATFORM; &THIS.APPLICATION;
					SS7Service elements.
				</para>
			</caption>
		</mediaobject>
		<para>Service serves following purposes:</para>
		<variablelist>
			<varlistentry>
				<term>Expose protocol access points</term>
				<listitem>
					<para>Access points allows user to access lower layer protocols, like <literal>SCCP</literal> and interact through such protocols with <literal>SS7</literal> network.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Expose management interface</term>
				<listitem>
					<para><literal>Shell Executor</literal> allows <literal>Shell</literal> client to connect and issue commands.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>Manage Linksets and their lifecycle</term>
				<listitem>
					<para><literal>Linkset Manager</literal> persists linksets information and manages their lifecycle, ie. it creates, activates them(also after restart).</para>
				</listitem>
			</varlistentry>
			
		</variablelist>
		
		<para>Configuration of SS7 Service is exaplained in section <xref linkend="configuring" /></para>
	</section>
	<section id="mobicents_design_overview_ss7_service">
		<title>&THIS.PLATFORM; &THIS.APPLICATION; Usage</title>
		<para>Diagram below depicts how &THIS.PLATFORM; &THIS.APPLICATION; is used:
		</para>
		<mediaobject
			id="ss7_design_general_2">
			<imageobject>
				<imagedata
					width="300px"
					align="center"
					fileref="images/ss7-design-overview2.jpg"
					format="PNG" />
			</imageobject>
			<caption>
				<para>&THIS.PLATFORM; &THIS.APPLICATION;
					general design
				</para>
			</caption>
		</mediaobject>
	 </section>
	 
	 
	<section id="mobicents_signaling_gateway">
		<title>&THIS.PLATFORM; Signaling Gateway</title>

		<para>
			&THIS.PLATFORM; Signaling Gateway (SG) is a signaling agent that receives/sends Switched Circuit Network (SCN) 
			native signaling at the edge of the IP network. &THIS.PLATFORM; Signaling Gateway leverages &THIS.PLATFORM; M3UA Stack 
			explained in <xref linkend="mobicents_signaling_gateway_m3ua"/> and Linkset explained in <xref linkend="design_overview_Linkset"/>    
		</para>
		
		<para>
			Diagram below shows the components which are included in &THIS.PLATFORM; SG. 
			Configuration of SG is explained in <xref linkend="configuring_sgw"/>
		</para>
		<mediaobject
			id="sgw_elements">
			<imageobject>
				<imagedata
					width="300px"
					align="center"
					fileref="images/MobicentsSS7Gateway.jpg"
					format="JPG" />
			</imageobject>
			<caption>
				<para>&THIS.PLATFORM; Signaling Gateway components
				</para>
			</caption>
		</mediaobject>		
		
		<section id="mobicents_signaling_gateway_m3ua">
			<title>&THIS.PLATFORM; M3UA Stack</title>
	
			<para>
				M3UA is client-server protocol supporting the transport of any SS7 MTP3-User signalling (e.g., ISUP and SCCP messages) over IP. M3UA is defined
				by the IETF SIGTRAN working group in RFC 4666. 
				&THIS.PLATFORM; M3UA Stack can be used on Application Server side or can be used on Signaling Gateway side. 
			</para>
		
			<note>
				<title>Note</title>
				<para>
					&THIS.PLATFORM; M3UA Stack uses Java SCTP layer which is available from JDK 7 onwards
				</para>
			</note>
					
			<section id="mobicents_signaling_gateway_m3ua_as">
				<title>&THIS.PLATFORM; M3UA Stack on AS side</title>		
				<para>
					Diagram below demonstrates the &THIS.PLATFORM; M3UA Stack used on Application Server (AS) side. 
					The information below explains the basic functionality of the &THIS.PLATFORM; M3UA Stack when used as an Application Server 
					which will communicate with an External Signaling Gateway 
				</para>
				<mediaobject
					id="m3ua_AS">
					<imageobject>
						<imagedata
							width="300px"
							align="center"
							fileref="images/M3UAAs.jpg"
							format="JPG" />
					</imageobject>
					<caption>
						<para>&THIS.PLATFORM; M3UA Stack configured on AS side
						</para>
					</caption>
				</mediaobject>
				<para>
					If configured as an AS, does not support configuring conventional SS7 links etc on that same stack. 
					To use M3UA Stack as AS, the Routing Context (RC) must be known. See Section <xref linkend="configuring_Rem_SGW"/> for configuring M3UA Stack 
					as AS. The Remote Signaling Gateway Process (RemSGP) object is created under the M3UA Stack.
				</para>
			</section>
			
			<section id="mobicents_signaling_gateway_m3ua_SG">
				<title>&THIS.PLATFORM; M3UA Stack on SG side</title>			
				<para>
					Diagram below demonstrates the &THIS.PLATFORM; M3UA Stack used on Signaling Gateway (SG) side. 
					The &THIS.PLATFORM; Signaling Gateway provides the Nodal Interworking Function (NIF) that allows SS7 Signaling (SCCP/ISUP)
					to be inter-worked into the M3UA/IP Network as shown in <xref linkend="signaling_gateway"/>
					
				</para>
				<mediaobject
					id="m3ua_SGW">
					<imageobject>
						<imagedata
							width="300px"
							align="center"
							fileref="images/M3UASgw.jpg"
							format="JPG" />
					</imageobject>
					<caption>
						<para>&THIS.PLATFORM; M3UA Stack configured on SG side
						</para>
					</caption>
				</mediaobject>
				<para>
					&THIS.PLATFORM; M3UA Stack used on SG side will share common point code with a set of M3UA Application Server. 
					M3UA stack on SG side can be configured as Loadbalance or Override traffic mode. It doesn't support Broadcast traffic mode. 
					See Section <xref linkend="configuring_sgw"/> for configuring M3UA Stack as SG. &THIS.PLATFORM; M3UA Stack used on SG side 
					doesn't support routing key management messages. The Routing Key should be provisioned statically using the management console.
				</para>	
			</section>	
		</section>
	 </section>	 
</chapter>

